.include "macros.inc"
.section .text, "ax"  # 0x80005560 - 0x80221F60
.global OSReport
OSReport:
/* 801F7890 001F47F0  7C 08 02 A6 */	mflr r0
/* 801F7894 001F47F4  90 01 00 04 */	stw r0, 4(r1)
/* 801F7898 001F47F8  94 21 FF 88 */	stwu r1, -0x78(r1)
/* 801F789C 001F47FC  40 86 00 24 */	bne cr1, lbl_801F78C0
/* 801F78A0 001F4800  D8 21 00 28 */	stfd f1, 0x28(r1)
/* 801F78A4 001F4804  D8 41 00 30 */	stfd f2, 0x30(r1)
/* 801F78A8 001F4808  D8 61 00 38 */	stfd f3, 0x38(r1)
/* 801F78AC 001F480C  D8 81 00 40 */	stfd f4, 0x40(r1)
/* 801F78B0 001F4810  D8 A1 00 48 */	stfd f5, 0x48(r1)
/* 801F78B4 001F4814  D8 C1 00 50 */	stfd f6, 0x50(r1)
/* 801F78B8 001F4818  D8 E1 00 58 */	stfd f7, 0x58(r1)
/* 801F78BC 001F481C  D9 01 00 60 */	stfd f8, 0x60(r1)
lbl_801F78C0:
/* 801F78C0 001F4820  90 61 00 08 */	stw r3, 8(r1)
/* 801F78C4 001F4824  3C 00 01 00 */	lis r0, 0x100
/* 801F78C8 001F4828  90 81 00 0C */	stw r4, 0xc(r1)
/* 801F78CC 001F482C  38 81 00 6C */	addi r4, r1, 0x6c
/* 801F78D0 001F4830  90 A1 00 10 */	stw r5, 0x10(r1)
/* 801F78D4 001F4834  90 C1 00 14 */	stw r6, 0x14(r1)
/* 801F78D8 001F4838  90 E1 00 18 */	stw r7, 0x18(r1)
/* 801F78DC 001F483C  91 01 00 1C */	stw r8, 0x1c(r1)
/* 801F78E0 001F4840  91 21 00 20 */	stw r9, 0x20(r1)
/* 801F78E4 001F4844  91 41 00 24 */	stw r10, 0x24(r1)
/* 801F78E8 001F4848  90 01 00 6C */	stw r0, 0x6c(r1)
/* 801F78EC 001F484C  38 01 00 80 */	addi r0, r1, 0x80
/* 801F78F0 001F4850  90 01 00 70 */	stw r0, 0x70(r1)
/* 801F78F4 001F4854  38 01 00 08 */	addi r0, r1, 8
/* 801F78F8 001F4858  90 01 00 74 */	stw r0, 0x74(r1)
/* 801F78FC 001F485C  48 01 ED E9 */	bl vprintf
/* 801F7900 001F4860  80 01 00 7C */	lwz r0, 0x7c(r1)
/* 801F7904 001F4864  38 21 00 78 */	addi r1, r1, 0x78
/* 801F7908 001F4868  7C 08 03 A6 */	mtlr r0
/* 801F790C 001F486C  4E 80 00 20 */	blr 

.global OSPanic
OSPanic:
/* 801F7910 001F4870  7C 08 02 A6 */	mflr r0
/* 801F7914 001F4874  90 01 00 04 */	stw r0, 4(r1)
/* 801F7918 001F4878  94 21 FF 70 */	stwu r1, -0x90(r1)
/* 801F791C 001F487C  93 E1 00 8C */	stw r31, 0x8c(r1)
/* 801F7920 001F4880  93 C1 00 88 */	stw r30, 0x88(r1)
/* 801F7924 001F4884  93 A1 00 84 */	stw r29, 0x84(r1)
/* 801F7928 001F4888  93 81 00 80 */	stw r28, 0x80(r1)
/* 801F792C 001F488C  40 86 00 24 */	bne cr1, lbl_801F7950
/* 801F7930 001F4890  D8 21 00 28 */	stfd f1, 0x28(r1)
/* 801F7934 001F4894  D8 41 00 30 */	stfd f2, 0x30(r1)
/* 801F7938 001F4898  D8 61 00 38 */	stfd f3, 0x38(r1)
/* 801F793C 001F489C  D8 81 00 40 */	stfd f4, 0x40(r1)
/* 801F7940 001F48A0  D8 A1 00 48 */	stfd f5, 0x48(r1)
/* 801F7944 001F48A4  D8 C1 00 50 */	stfd f6, 0x50(r1)
/* 801F7948 001F48A8  D8 E1 00 58 */	stfd f7, 0x58(r1)
/* 801F794C 001F48AC  D9 01 00 60 */	stfd f8, 0x60(r1)
lbl_801F7950:
/* 801F7950 001F48B0  90 61 00 08 */	stw r3, 8(r1)
/* 801F7954 001F48B4  3B 83 00 00 */	addi r28, r3, 0
/* 801F7958 001F48B8  3B C4 00 00 */	addi r30, r4, 0
/* 801F795C 001F48BC  90 81 00 0C */	stw r4, 0xc(r1)
/* 801F7960 001F48C0  3B A5 00 00 */	addi r29, r5, 0
/* 801F7964 001F48C4  90 A1 00 10 */	stw r5, 0x10(r1)
/* 801F7968 001F48C8  90 C1 00 14 */	stw r6, 0x14(r1)
/* 801F796C 001F48CC  3C C0 80 2E */	lis r6, lbl_802E78F0@ha
/* 801F7970 001F48D0  3B E6 78 F0 */	addi r31, r6, lbl_802E78F0@l
/* 801F7974 001F48D4  90 E1 00 18 */	stw r7, 0x18(r1)
/* 801F7978 001F48D8  91 01 00 1C */	stw r8, 0x1c(r1)
/* 801F797C 001F48DC  91 21 00 20 */	stw r9, 0x20(r1)
/* 801F7980 001F48E0  91 41 00 24 */	stw r10, 0x24(r1)
/* 801F7984 001F48E4  48 00 15 F9 */	bl OSDisableInterrupts
/* 801F7988 001F48E8  3C 00 03 00 */	lis r0, 0x300
/* 801F798C 001F48EC  90 01 00 74 */	stw r0, 0x74(r1)
/* 801F7990 001F48F0  38 01 00 98 */	addi r0, r1, 0x98
/* 801F7994 001F48F4  38 81 00 74 */	addi r4, r1, 0x74
/* 801F7998 001F48F8  90 01 00 78 */	stw r0, 0x78(r1)
/* 801F799C 001F48FC  38 01 00 08 */	addi r0, r1, 8
/* 801F79A0 001F4900  38 7D 00 00 */	addi r3, r29, 0
/* 801F79A4 001F4904  90 01 00 7C */	stw r0, 0x7c(r1)
/* 801F79A8 001F4908  48 01 ED 3D */	bl vprintf
/* 801F79AC 001F490C  38 7F 00 00 */	addi r3, r31, 0
/* 801F79B0 001F4910  4C C6 31 82 */	crclr 6
/* 801F79B4 001F4914  38 9C 00 00 */	addi r4, r28, 0
/* 801F79B8 001F4918  38 BE 00 00 */	addi r5, r30, 0
/* 801F79BC 001F491C  4B FF FE D5 */	bl OSReport
/* 801F79C0 001F4920  38 7F 00 18 */	addi r3, r31, 0x18
/* 801F79C4 001F4924  4C C6 31 82 */	crclr 6
/* 801F79C8 001F4928  4B FF FE C9 */	bl OSReport
/* 801F79CC 001F492C  3B C0 00 00 */	li r30, 0
/* 801F79D0 001F4930  4B FF FA 65 */	bl OSGetStackPointer
/* 801F79D4 001F4934  7C 7D 1B 78 */	mr r29, r3
/* 801F79D8 001F4938  48 00 00 20 */	b lbl_801F79F8
lbl_801F79DC:
/* 801F79DC 001F493C  80 BD 00 00 */	lwz r5, 0(r29)
/* 801F79E0 001F4940  7F A4 EB 78 */	mr r4, r29
/* 801F79E4 001F4944  80 DD 00 04 */	lwz r6, 4(r29)
/* 801F79E8 001F4948  38 7F 00 40 */	addi r3, r31, 0x40
/* 801F79EC 001F494C  4C C6 31 82 */	crclr 6
/* 801F79F0 001F4950  4B FF FE A1 */	bl OSReport
/* 801F79F4 001F4954  83 BD 00 00 */	lwz r29, 0(r29)
lbl_801F79F8:
/* 801F79F8 001F4958  28 1D 00 00 */	cmplwi r29, 0
/* 801F79FC 001F495C  41 82 00 1C */	beq lbl_801F7A18
/* 801F7A00 001F4960  3C 1D 00 01 */	addis r0, r29, 1
/* 801F7A04 001F4964  28 00 FF FF */	cmplwi r0, 0xffff
/* 801F7A08 001F4968  41 82 00 10 */	beq lbl_801F7A18
/* 801F7A0C 001F496C  28 1E 00 10 */	cmplwi r30, 0x10
/* 801F7A10 001F4970  3B DE 00 01 */	addi r30, r30, 1
/* 801F7A14 001F4974  41 80 FF C8 */	blt lbl_801F79DC
lbl_801F7A18:
/* 801F7A18 001F4978  4B FF DF 65 */	bl PPCHalt
/* 801F7A1C 001F497C  80 01 00 94 */	lwz r0, 0x94(r1)
/* 801F7A20 001F4980  83 E1 00 8C */	lwz r31, 0x8c(r1)
/* 801F7A24 001F4984  83 C1 00 88 */	lwz r30, 0x88(r1)
/* 801F7A28 001F4988  7C 08 03 A6 */	mtlr r0
/* 801F7A2C 001F498C  83 A1 00 84 */	lwz r29, 0x84(r1)
/* 801F7A30 001F4990  83 81 00 80 */	lwz r28, 0x80(r1)
/* 801F7A34 001F4994  38 21 00 90 */	addi r1, r1, 0x90
/* 801F7A38 001F4998  4E 80 00 20 */	blr 

.global OSSetErrorHandler
OSSetErrorHandler:
/* 801F7A3C 001F499C  3C A0 80 3D */	lis r5, OSErrorTable@ha
/* 801F7A40 001F49A0  54 63 13 BA */	rlwinm r3, r3, 2, 0xe, 0x1d
/* 801F7A44 001F49A4  38 05 23 B0 */	addi r0, r5, OSErrorTable@l
/* 801F7A48 001F49A8  7C A0 1A 14 */	add r5, r0, r3
/* 801F7A4C 001F49AC  80 65 00 00 */	lwz r3, 0(r5)
/* 801F7A50 001F49B0  90 85 00 00 */	stw r4, 0(r5)
/* 801F7A54 001F49B4  4E 80 00 20 */	blr 

.global __OSUnhandledException
__OSUnhandledException:
/* 801F7A58 001F49B8  7C 08 02 A6 */	mflr r0
/* 801F7A5C 001F49BC  90 01 00 04 */	stw r0, 4(r1)
/* 801F7A60 001F49C0  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 801F7A64 001F49C4  BF 61 00 1C */	stmw r27, 0x1c(r1)
/* 801F7A68 001F49C8  7C 9C 23 78 */	mr r28, r4
/* 801F7A6C 001F49CC  3B 63 00 00 */	addi r27, r3, 0
/* 801F7A70 001F49D0  3B A5 00 00 */	addi r29, r5, 0
/* 801F7A74 001F49D4  3B C6 00 00 */	addi r30, r6, 0
/* 801F7A78 001F49D8  80 04 01 9C */	lwz r0, 0x19c(r4)
/* 801F7A7C 001F49DC  3C 80 80 2E */	lis r4, lbl_802E78F0@ha
/* 801F7A80 001F49E0  3B E4 78 F0 */	addi r31, r4, lbl_802E78F0@l
/* 801F7A84 001F49E4  54 00 07 BD */	rlwinm. r0, r0, 0, 0x1e, 0x1e
/* 801F7A88 001F49E8  40 82 00 18 */	bne lbl_801F7AA0
/* 801F7A8C 001F49EC  38 7F 00 5C */	addi r3, r31, 0x5c
/* 801F7A90 001F49F0  4C C6 31 82 */	crclr 6
/* 801F7A94 001F49F4  57 64 06 3E */	clrlwi r4, r27, 0x18
/* 801F7A98 001F49F8  4B FF FD F9 */	bl OSReport
/* 801F7A9C 001F49FC  48 00 00 68 */	b lbl_801F7B04
lbl_801F7AA0:
/* 801F7AA0 001F4A00  57 63 06 3E */	clrlwi r3, r27, 0x18
/* 801F7AA4 001F4A04  3C 80 80 3D */	lis r4, OSErrorTable@ha
/* 801F7AA8 001F4A08  57 65 15 BA */	rlwinm r5, r27, 2, 0x16, 0x1d
/* 801F7AAC 001F4A0C  38 04 23 B0 */	addi r0, r4, OSErrorTable@l
/* 801F7AB0 001F4A10  7C 80 2A 14 */	add r4, r0, r5
/* 801F7AB4 001F4A14  81 84 00 00 */	lwz r12, 0(r4)
/* 801F7AB8 001F4A18  28 0C 00 00 */	cmplwi r12, 0
/* 801F7ABC 001F4A1C  41 82 00 24 */	beq lbl_801F7AE0
/* 801F7AC0 001F4A20  7D 88 03 A6 */	mtlr r12
/* 801F7AC4 001F4A24  38 9C 00 00 */	addi r4, r28, 0
/* 801F7AC8 001F4A28  38 BD 00 00 */	addi r5, r29, 0
/* 801F7ACC 001F4A2C  4C C6 31 82 */	crclr 6
/* 801F7AD0 001F4A30  38 DE 00 00 */	addi r6, r30, 0
/* 801F7AD4 001F4A34  4E 80 00 21 */	blrl 
/* 801F7AD8 001F4A38  7F 83 E3 78 */	mr r3, r28
/* 801F7ADC 001F4A3C  4B FF F8 81 */	bl OSLoadContext
lbl_801F7AE0:
/* 801F7AE0 001F4A40  57 60 06 3E */	clrlwi r0, r27, 0x18
/* 801F7AE4 001F4A44  28 00 00 08 */	cmplwi r0, 8
/* 801F7AE8 001F4A48  40 82 00 0C */	bne lbl_801F7AF4
/* 801F7AEC 001F4A4C  7F 83 E3 78 */	mr r3, r28
/* 801F7AF0 001F4A50  4B FF F8 6D */	bl OSLoadContext
lbl_801F7AF4:
/* 801F7AF4 001F4A54  38 7F 00 7C */	addi r3, r31, 0x7c
/* 801F7AF8 001F4A58  4C C6 31 82 */	crclr 6
/* 801F7AFC 001F4A5C  57 64 06 3E */	clrlwi r4, r27, 0x18
/* 801F7B00 001F4A60  4B FF FD 91 */	bl OSReport
lbl_801F7B04:
/* 801F7B04 001F4A64  38 6D 29 E8 */	addi r3, r13, lbl_803E7708@sda21
/* 801F7B08 001F4A68  4C C6 31 82 */	crclr 6
/* 801F7B0C 001F4A6C  4B FF FD 85 */	bl OSReport
/* 801F7B10 001F4A70  7F 83 E3 78 */	mr r3, r28
/* 801F7B14 001F4A74  4B FF FA 09 */	bl OSDumpContext
/* 801F7B18 001F4A78  38 9D 00 00 */	addi r4, r29, 0
/* 801F7B1C 001F4A7C  4C C6 31 82 */	crclr 6
/* 801F7B20 001F4A80  38 BE 00 00 */	addi r5, r30, 0
/* 801F7B24 001F4A84  38 7F 00 94 */	addi r3, r31, 0x94
/* 801F7B28 001F4A88  4B FF FD 69 */	bl OSReport
/* 801F7B2C 001F4A8C  57 60 06 3E */	clrlwi r0, r27, 0x18
/* 801F7B30 001F4A90  2C 00 00 04 */	cmpwi r0, 4
/* 801F7B34 001F4A94  41 82 00 80 */	beq lbl_801F7BB4
/* 801F7B38 001F4A98  40 80 00 14 */	bge lbl_801F7B4C
/* 801F7B3C 001F4A9C  2C 00 00 02 */	cmpwi r0, 2
/* 801F7B40 001F4AA0  41 82 00 1C */	beq lbl_801F7B5C
/* 801F7B44 001F4AA4  40 80 00 30 */	bge lbl_801F7B74
/* 801F7B48 001F4AA8  48 00 00 6C */	b lbl_801F7BB4
lbl_801F7B4C:
/* 801F7B4C 001F4AAC  2C 00 00 06 */	cmpwi r0, 6
/* 801F7B50 001F4AB0  41 82 00 50 */	beq lbl_801F7BA0
/* 801F7B54 001F4AB4  40 80 00 60 */	bge lbl_801F7BB4
/* 801F7B58 001F4AB8  48 00 00 30 */	b lbl_801F7B88
lbl_801F7B5C:
/* 801F7B5C 001F4ABC  80 9C 01 98 */	lwz r4, 0x198(r28)
/* 801F7B60 001F4AC0  38 BE 00 00 */	addi r5, r30, 0
/* 801F7B64 001F4AC4  38 7F 00 C4 */	addi r3, r31, 0xc4
/* 801F7B68 001F4AC8  4C C6 31 82 */	crclr 6
/* 801F7B6C 001F4ACC  4B FF FD 25 */	bl OSReport
/* 801F7B70 001F4AD0  48 00 00 44 */	b lbl_801F7BB4
lbl_801F7B74:
/* 801F7B74 001F4AD4  80 9C 01 98 */	lwz r4, 0x198(r28)
/* 801F7B78 001F4AD8  38 7F 01 24 */	addi r3, r31, 0x124
/* 801F7B7C 001F4ADC  4C C6 31 82 */	crclr 6
/* 801F7B80 001F4AE0  4B FF FD 11 */	bl OSReport
/* 801F7B84 001F4AE4  48 00 00 30 */	b lbl_801F7BB4
lbl_801F7B88:
/* 801F7B88 001F4AE8  80 9C 01 98 */	lwz r4, 0x198(r28)
/* 801F7B8C 001F4AEC  38 BE 00 00 */	addi r5, r30, 0
/* 801F7B90 001F4AF0  38 7F 01 70 */	addi r3, r31, 0x170
/* 801F7B94 001F4AF4  4C C6 31 82 */	crclr 6
/* 801F7B98 001F4AF8  4B FF FC F9 */	bl OSReport
/* 801F7B9C 001F4AFC  48 00 00 18 */	b lbl_801F7BB4
lbl_801F7BA0:
/* 801F7BA0 001F4B00  80 9C 01 98 */	lwz r4, 0x198(r28)
/* 801F7BA4 001F4B04  38 BE 00 00 */	addi r5, r30, 0
/* 801F7BA8 001F4B08  38 7F 01 D4 */	addi r3, r31, 0x1d4
/* 801F7BAC 001F4B0C  4C C6 31 82 */	crclr 6
/* 801F7BB0 001F4B10  4B FF FC E1 */	bl OSReport
lbl_801F7BB4:
/* 801F7BB4 001F4B14  4B FF DD C9 */	bl PPCHalt
/* 801F7BB8 001F4B18  BB 61 00 1C */	lmw r27, 0x1c(r1)
/* 801F7BBC 001F4B1C  80 01 00 34 */	lwz r0, 0x34(r1)
/* 801F7BC0 001F4B20  38 21 00 30 */	addi r1, r1, 0x30
/* 801F7BC4 001F4B24  7C 08 03 A6 */	mtlr r0
/* 801F7BC8 001F4B28  4E 80 00 20 */	blr 

.section .data, "wa"  # 0x80222DC0 - 0x802E9640
.balign 0x8
lbl_802E78F0:
	.asciz " in \"%s\" on line %d.\n"
.balign 4
lbl_802E7908:
	.asciz "\nAddress:      Back Chain    LR Save\n"
.balign 4
lbl_802E7930:
	.asciz "0x%08x:   0x%08x    0x%08x\n"
.balign 4
lbl_802E794C:
	.asciz "Non-recoverable Exception %d"
.balign 4
lbl_802E796C:
	.asciz "Unhandled Exception %d"
.balign 4
lbl_802E7984:
	.asciz "\nDSISR= 0x%08x                   DAR  = 0x%08x\n"
.balign 4
lbl_802E79B4:
	.asciz "\nInstruction at 0x%x (read from SRR0) attempted to access invalid address 0x%x (read from DAR)\n"
.balign 4
lbl_802E7A14:
	.asciz "\nAttempted to fetch instruction from invalid address 0x%x (read from SRR0)\n"
.balign 4
lbl_802E7A60:
	.asciz "\nInstruction at 0x%x (read from SRR0) attempted to access unaligned address 0x%x (read from DAR)\n"
.balign 4
lbl_802E7AC4:
	.asciz "\nProgram exception : Possible illegal instruction/operation at or around 0x%x (read from SRR0)\n"

.section .sdata, "wa"  # 0x803DCD20 - 0x803E7820
.balign 0x8
lbl_803E7708:
	.asciz "\n"
