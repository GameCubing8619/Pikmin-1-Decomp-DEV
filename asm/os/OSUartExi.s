.include "macros.inc"
.section .text, "ax"  # 0x80005560 - 0x80221F60
.global InitializeUART
InitializeUART:
/* 801FD7C4 001FA724  7C 08 02 A6 */	mflr r0
/* 801FD7C8 001FA728  90 01 00 04 */	stw r0, 4(r1)
/* 801FD7CC 001FA72C  94 21 FF F8 */	stwu r1, -8(r1)
/* 801FD7D0 001FA730  4B FF 81 D9 */	bl OSGetConsoleType
/* 801FD7D4 001FA734  54 60 00 C7 */	rlwinm. r0, r3, 0, 3, 3
/* 801FD7D8 001FA738  40 82 00 14 */	bne lbl_801FD7EC
/* 801FD7DC 001FA73C  38 00 00 00 */	li r0, 0
/* 801FD7E0 001FA740  90 0D 32 40 */	stw r0, serEnabled@sda21(r13)
/* 801FD7E4 001FA744  38 60 00 02 */	li r3, 2
/* 801FD7E8 001FA748  48 00 00 14 */	b lbl_801FD7FC
lbl_801FD7EC:
/* 801FD7EC 001FA74C  3C 60 A5 FF */	lis r3, 0xA5FF005A@ha
/* 801FD7F0 001FA750  38 03 00 5A */	addi r0, r3, 0xA5FF005A@l
/* 801FD7F4 001FA754  90 0D 32 40 */	stw r0, serEnabled@sda21(r13)
/* 801FD7F8 001FA758  38 60 00 00 */	li r3, 0
lbl_801FD7FC:
/* 801FD7FC 001FA75C  80 01 00 0C */	lwz r0, 0xc(r1)
/* 801FD800 001FA760  38 21 00 08 */	addi r1, r1, 8
/* 801FD804 001FA764  7C 08 03 A6 */	mtlr r0
/* 801FD808 001FA768  4E 80 00 20 */	blr 

.global ReadUARTN
ReadUARTN:
/* 801FD80C 001FA76C  38 60 00 04 */	li r3, 4
/* 801FD810 001FA770  4E 80 00 20 */	blr 

.global WriteUARTN
WriteUARTN:
/* 801FD814 001FA774  7C 08 02 A6 */	mflr r0
/* 801FD818 001FA778  90 01 00 04 */	stw r0, 4(r1)
/* 801FD81C 001FA77C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 801FD820 001FA780  BF 41 00 18 */	stmw r26, 0x18(r1)
/* 801FD824 001FA784  3B 43 00 00 */	addi r26, r3, 0
/* 801FD828 001FA788  3B 64 00 00 */	addi r27, r4, 0
/* 801FD82C 001FA78C  80 AD 32 40 */	lwz r5, serEnabled@sda21(r13)
/* 801FD830 001FA790  3C 05 5A 01 */	addis r0, r5, 0x5a01
/* 801FD834 001FA794  28 00 00 5A */	cmplwi r0, 0x5a
/* 801FD838 001FA798  41 82 00 0C */	beq lbl_801FD844
/* 801FD83C 001FA79C  38 60 00 02 */	li r3, 2
/* 801FD840 001FA7A0  48 00 01 C0 */	b lbl_801FDA00
lbl_801FD844:
/* 801FD844 001FA7A4  38 60 00 00 */	li r3, 0
/* 801FD848 001FA7A8  38 80 00 01 */	li r4, 1
/* 801FD84C 001FA7AC  38 A0 00 00 */	li r5, 0
/* 801FD850 001FA7B0  4B FF B4 ED */	bl EXILock
/* 801FD854 001FA7B4  2C 03 00 00 */	cmpwi r3, 0
/* 801FD858 001FA7B8  40 82 00 0C */	bne lbl_801FD864
/* 801FD85C 001FA7BC  38 60 00 00 */	li r3, 0
/* 801FD860 001FA7C0  48 00 01 A0 */	b lbl_801FDA00
lbl_801FD864:
/* 801FD864 001FA7C4  38 9A 00 00 */	addi r4, r26, 0
/* 801FD868 001FA7C8  38 60 00 0D */	li r3, 0xd
/* 801FD86C 001FA7CC  48 00 00 18 */	b lbl_801FD884
lbl_801FD870:
/* 801FD870 001FA7D0  88 04 00 00 */	lbz r0, 0(r4)
/* 801FD874 001FA7D4  28 00 00 0A */	cmplwi r0, 0xa
/* 801FD878 001FA7D8  40 82 00 08 */	bne lbl_801FD880
/* 801FD87C 001FA7DC  98 64 00 00 */	stb r3, 0(r4)
lbl_801FD880:
/* 801FD880 001FA7E0  38 84 00 01 */	addi r4, r4, 1
lbl_801FD884:
/* 801FD884 001FA7E4  7C 1A 20 50 */	subf r0, r26, r4
/* 801FD888 001FA7E8  7C 00 D8 40 */	cmplw r0, r27
/* 801FD88C 001FA7EC  41 80 FF E4 */	blt lbl_801FD870
/* 801FD890 001FA7F0  3C 00 A0 01 */	lis r0, 0xa001
/* 801FD894 001FA7F4  90 01 00 14 */	stw r0, 0x14(r1)
/* 801FD898 001FA7F8  3B 80 00 00 */	li r28, 0
/* 801FD89C 001FA7FC  3F E0 20 01 */	lis r31, 0x2001
/* 801FD8A0 001FA800  48 00 01 4C */	b lbl_801FD9EC
lbl_801FD8A4:
/* 801FD8A4 001FA804  38 60 00 00 */	li r3, 0
/* 801FD8A8 001FA808  38 80 00 01 */	li r4, 1
/* 801FD8AC 001FA80C  38 A0 00 03 */	li r5, 3
/* 801FD8B0 001FA810  4B FF AE 2D */	bl EXISelect
/* 801FD8B4 001FA814  2C 03 00 00 */	cmpwi r3, 0
/* 801FD8B8 001FA818  40 82 00 0C */	bne lbl_801FD8C4
/* 801FD8BC 001FA81C  38 00 FF FF */	li r0, -1
/* 801FD8C0 001FA820  48 00 00 5C */	b lbl_801FD91C
lbl_801FD8C4:
/* 801FD8C4 001FA824  93 E1 00 10 */	stw r31, 0x10(r1)
/* 801FD8C8 001FA828  38 81 00 10 */	addi r4, r1, 0x10
/* 801FD8CC 001FA82C  38 60 00 00 */	li r3, 0
/* 801FD8D0 001FA830  38 A0 00 04 */	li r5, 4
/* 801FD8D4 001FA834  38 C0 00 01 */	li r6, 1
/* 801FD8D8 001FA838  38 E0 00 00 */	li r7, 0
/* 801FD8DC 001FA83C  4B FF A3 E5 */	bl EXIImm
/* 801FD8E0 001FA840  38 60 00 00 */	li r3, 0
/* 801FD8E4 001FA844  4B FF A7 C5 */	bl EXISync
/* 801FD8E8 001FA848  38 81 00 10 */	addi r4, r1, 0x10
/* 801FD8EC 001FA84C  38 60 00 00 */	li r3, 0
/* 801FD8F0 001FA850  38 A0 00 01 */	li r5, 1
/* 801FD8F4 001FA854  38 C0 00 00 */	li r6, 0
/* 801FD8F8 001FA858  38 E0 00 00 */	li r7, 0
/* 801FD8FC 001FA85C  4B FF A3 C5 */	bl EXIImm
/* 801FD900 001FA860  38 60 00 00 */	li r3, 0
/* 801FD904 001FA864  4B FF A7 A5 */	bl EXISync
/* 801FD908 001FA868  38 60 00 00 */	li r3, 0
/* 801FD90C 001FA86C  4B FF AE FD */	bl EXIDeselect
/* 801FD910 001FA870  80 01 00 10 */	lwz r0, 0x10(r1)
/* 801FD914 001FA874  54 00 46 3E */	srwi r0, r0, 0x18
/* 801FD918 001FA878  20 00 00 10 */	subfic r0, r0, 0x10
lbl_801FD91C:
/* 801FD91C 001FA87C  2C 00 00 00 */	cmpwi r0, 0
/* 801FD920 001FA880  7C 1D 03 78 */	mr r29, r0
/* 801FD924 001FA884  40 80 00 0C */	bge lbl_801FD930
/* 801FD928 001FA888  3B 80 FF FF */	li r28, -1
/* 801FD92C 001FA88C  48 00 00 C8 */	b lbl_801FD9F4
lbl_801FD930:
/* 801FD930 001FA890  2C 00 00 0C */	cmpwi r0, 0xc
/* 801FD934 001FA894  40 80 00 0C */	bge lbl_801FD940
/* 801FD938 001FA898  7C 00 D8 40 */	cmplw r0, r27
/* 801FD93C 001FA89C  41 80 00 B0 */	blt lbl_801FD9EC
lbl_801FD940:
/* 801FD940 001FA8A0  38 60 00 00 */	li r3, 0
/* 801FD944 001FA8A4  38 80 00 01 */	li r4, 1
/* 801FD948 001FA8A8  38 A0 00 03 */	li r5, 3
/* 801FD94C 001FA8AC  4B FF AD 91 */	bl EXISelect
/* 801FD950 001FA8B0  2C 03 00 00 */	cmpwi r3, 0
/* 801FD954 001FA8B4  40 82 00 0C */	bne lbl_801FD960
/* 801FD958 001FA8B8  3B 80 FF FF */	li r28, -1
/* 801FD95C 001FA8BC  48 00 00 98 */	b lbl_801FD9F4
lbl_801FD960:
/* 801FD960 001FA8C0  38 81 00 14 */	addi r4, r1, 0x14
/* 801FD964 001FA8C4  38 60 00 00 */	li r3, 0
/* 801FD968 001FA8C8  38 A0 00 04 */	li r5, 4
/* 801FD96C 001FA8CC  38 C0 00 01 */	li r6, 1
/* 801FD970 001FA8D0  38 E0 00 00 */	li r7, 0
/* 801FD974 001FA8D4  4B FF A3 4D */	bl EXIImm
/* 801FD978 001FA8D8  38 60 00 00 */	li r3, 0
/* 801FD97C 001FA8DC  4B FF A7 2D */	bl EXISync
/* 801FD980 001FA8E0  48 00 00 54 */	b lbl_801FD9D4
lbl_801FD984:
/* 801FD984 001FA8E4  2C 1D 00 04 */	cmpwi r29, 4
/* 801FD988 001FA8E8  40 80 00 0C */	bge lbl_801FD994
/* 801FD98C 001FA8EC  7C 1D D8 40 */	cmplw r29, r27
/* 801FD990 001FA8F0  41 80 00 54 */	blt lbl_801FD9E4
lbl_801FD994:
/* 801FD994 001FA8F4  28 1B 00 04 */	cmplwi r27, 4
/* 801FD998 001FA8F8  40 80 00 0C */	bge lbl_801FD9A4
/* 801FD99C 001FA8FC  7F 7E DB 78 */	mr r30, r27
/* 801FD9A0 001FA900  48 00 00 08 */	b lbl_801FD9A8
lbl_801FD9A4:
/* 801FD9A4 001FA904  3B C0 00 04 */	li r30, 4
lbl_801FD9A8:
/* 801FD9A8 001FA908  38 BE 00 00 */	addi r5, r30, 0
/* 801FD9AC 001FA90C  38 9A 00 00 */	addi r4, r26, 0
/* 801FD9B0 001FA910  38 60 00 00 */	li r3, 0
/* 801FD9B4 001FA914  38 C0 00 01 */	li r6, 1
/* 801FD9B8 001FA918  38 E0 00 00 */	li r7, 0
/* 801FD9BC 001FA91C  4B FF A3 05 */	bl EXIImm
/* 801FD9C0 001FA920  7F 5A F2 14 */	add r26, r26, r30
/* 801FD9C4 001FA924  7F 7E D8 50 */	subf r27, r30, r27
/* 801FD9C8 001FA928  7F BE E8 50 */	subf r29, r30, r29
/* 801FD9CC 001FA92C  38 60 00 00 */	li r3, 0
/* 801FD9D0 001FA930  4B FF A6 D9 */	bl EXISync
lbl_801FD9D4:
/* 801FD9D4 001FA934  2C 1D 00 00 */	cmpwi r29, 0
/* 801FD9D8 001FA938  41 82 00 0C */	beq lbl_801FD9E4
/* 801FD9DC 001FA93C  28 1B 00 00 */	cmplwi r27, 0
/* 801FD9E0 001FA940  40 82 FF A4 */	bne lbl_801FD984
lbl_801FD9E4:
/* 801FD9E4 001FA944  38 60 00 00 */	li r3, 0
/* 801FD9E8 001FA948  4B FF AE 21 */	bl EXIDeselect
lbl_801FD9EC:
/* 801FD9EC 001FA94C  28 1B 00 00 */	cmplwi r27, 0
/* 801FD9F0 001FA950  40 82 FE B4 */	bne lbl_801FD8A4
lbl_801FD9F4:
/* 801FD9F4 001FA954  38 60 00 00 */	li r3, 0
/* 801FD9F8 001FA958  4B FF B4 39 */	bl EXIUnlock
/* 801FD9FC 001FA95C  7F 83 E3 78 */	mr r3, r28
lbl_801FDA00:
/* 801FDA00 001FA960  BB 41 00 18 */	lmw r26, 0x18(r1)
/* 801FDA04 001FA964  80 01 00 34 */	lwz r0, 0x34(r1)
/* 801FDA08 001FA968  38 21 00 30 */	addi r1, r1, 0x30
/* 801FDA0C 001FA96C  7C 08 03 A6 */	mtlr r0
/* 801FDA10 001FA970  4E 80 00 20 */	blr 

.section .sbss, "wa"
.balign 8
serEnabled:
	.skip 4
