.include "macros.inc"
.section .text, "ax"  # 0x80005560 - 0x80221F60
.fn CARDRenameAsync, global
/* 8020D150 0020A0B0  7C 08 02 A6 */	mflr r0
/* 8020D154 0020A0B4  90 01 00 04 */	stw r0, 4(r1)
/* 8020D158 0020A0B8  94 21 FF B8 */	stwu r1, -0x48(r1)
/* 8020D15C 0020A0BC  BE E1 00 24 */	stmw r23, 0x24(r1)
/* 8020D160 0020A0C0  7C 9D 23 78 */	mr r29, r4
/* 8020D164 0020A0C4  3B 83 00 00 */	addi r28, r3, 0
/* 8020D168 0020A0C8  3B C5 00 00 */	addi r30, r5, 0
/* 8020D16C 0020A0CC  3B E6 00 00 */	addi r31, r6, 0
/* 8020D170 0020A0D0  88 84 00 00 */	lbz r4, 0(r4)
/* 8020D174 0020A0D4  7C 80 07 74 */	extsb r0, r4
/* 8020D178 0020A0D8  2C 00 00 FF */	cmpwi r0, 0xff
/* 8020D17C 0020A0DC  41 82 00 24 */	beq .L_8020D1A0
/* 8020D180 0020A0E0  88 7E 00 00 */	lbz r3, 0(r30)
/* 8020D184 0020A0E4  7C 60 07 74 */	extsb r0, r3
/* 8020D188 0020A0E8  2C 00 00 FF */	cmpwi r0, 0xff
/* 8020D18C 0020A0EC  41 82 00 14 */	beq .L_8020D1A0
/* 8020D190 0020A0F0  7C 80 07 75 */	extsb. r0, r4
/* 8020D194 0020A0F4  41 82 00 0C */	beq .L_8020D1A0
/* 8020D198 0020A0F8  7C 60 07 75 */	extsb. r0, r3
/* 8020D19C 0020A0FC  40 82 00 0C */	bne .L_8020D1A8
.L_8020D1A0:
/* 8020D1A0 0020A100  38 60 FF 80 */	li r3, -128
/* 8020D1A4 0020A104  48 00 01 88 */	b .L_8020D32C
.L_8020D1A8:
/* 8020D1A8 0020A108  7F A3 EB 78 */	mr r3, r29
/* 8020D1AC 0020A10C  48 00 C2 61 */	bl strlen
/* 8020D1B0 0020A110  28 03 00 20 */	cmplwi r3, 0x20
/* 8020D1B4 0020A114  41 81 00 14 */	bgt .L_8020D1C8
/* 8020D1B8 0020A118  7F C3 F3 78 */	mr r3, r30
/* 8020D1BC 0020A11C  48 00 C2 51 */	bl strlen
/* 8020D1C0 0020A120  28 03 00 20 */	cmplwi r3, 0x20
/* 8020D1C4 0020A124  40 81 00 0C */	ble .L_8020D1D0
.L_8020D1C8:
/* 8020D1C8 0020A128  38 60 FF F4 */	li r3, -12
/* 8020D1CC 0020A12C  48 00 01 60 */	b .L_8020D32C
.L_8020D1D0:
/* 8020D1D0 0020A130  38 7C 00 00 */	addi r3, r28, 0
/* 8020D1D4 0020A134  38 81 00 18 */	addi r4, r1, 0x18
/* 8020D1D8 0020A138  4B FF BC 99 */	bl __CARDGetControlBlock
/* 8020D1DC 0020A13C  2C 03 00 00 */	cmpwi r3, 0
/* 8020D1E0 0020A140  40 80 00 08 */	bge .L_8020D1E8
/* 8020D1E4 0020A144  48 00 01 48 */	b .L_8020D32C
.L_8020D1E8:
/* 8020D1E8 0020A148  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8020D1EC 0020A14C  3A E0 FF FF */	li r23, -1
/* 8020D1F0 0020A150  3B 00 FF FF */	li r24, -1
/* 8020D1F4 0020A154  4B FF C6 BD */	bl __CARDGetDirBlock
/* 8020D1F8 0020A158  3B 43 00 00 */	addi r26, r3, 0
/* 8020D1FC 0020A15C  3B 7A 00 00 */	addi r27, r26, 0
/* 8020D200 0020A160  3B 20 00 00 */	li r25, 0
.L_8020D204:
/* 8020D204 0020A164  88 1B 00 00 */	lbz r0, 0(r27)
/* 8020D208 0020A168  28 00 00 FF */	cmplwi r0, 0xff
/* 8020D20C 0020A16C  41 82 00 68 */	beq .L_8020D274
/* 8020D210 0020A170  80 8D 34 08 */	lwz r4, __CARDDiskID@sda21(r13)
/* 8020D214 0020A174  38 7B 00 00 */	addi r3, r27, 0
/* 8020D218 0020A178  38 A0 00 04 */	li r5, 4
/* 8020D21C 0020A17C  48 00 8F 51 */	bl memcmp
/* 8020D220 0020A180  2C 03 00 00 */	cmpwi r3, 0
/* 8020D224 0020A184  40 82 00 50 */	bne .L_8020D274
/* 8020D228 0020A188  80 8D 34 08 */	lwz r4, __CARDDiskID@sda21(r13)
/* 8020D22C 0020A18C  38 7B 00 04 */	addi r3, r27, 4
/* 8020D230 0020A190  38 A0 00 02 */	li r5, 2
/* 8020D234 0020A194  38 84 00 04 */	addi r4, r4, 4
/* 8020D238 0020A198  48 00 8F 35 */	bl memcmp
/* 8020D23C 0020A19C  2C 03 00 00 */	cmpwi r3, 0
/* 8020D240 0020A1A0  40 82 00 34 */	bne .L_8020D274
/* 8020D244 0020A1A4  38 7B 00 00 */	addi r3, r27, 0
/* 8020D248 0020A1A8  38 9D 00 00 */	addi r4, r29, 0
/* 8020D24C 0020A1AC  4B FF E8 35 */	bl __CARDCompareFileName
/* 8020D250 0020A1B0  2C 03 00 00 */	cmpwi r3, 0
/* 8020D254 0020A1B4  41 82 00 08 */	beq .L_8020D25C
/* 8020D258 0020A1B8  7F 37 CB 78 */	mr r23, r25
.L_8020D25C:
/* 8020D25C 0020A1BC  38 7B 00 00 */	addi r3, r27, 0
/* 8020D260 0020A1C0  38 9E 00 00 */	addi r4, r30, 0
/* 8020D264 0020A1C4  4B FF E8 1D */	bl __CARDCompareFileName
/* 8020D268 0020A1C8  2C 03 00 00 */	cmpwi r3, 0
/* 8020D26C 0020A1CC  41 82 00 08 */	beq .L_8020D274
/* 8020D270 0020A1D0  7F 38 CB 78 */	mr r24, r25
.L_8020D274:
/* 8020D274 0020A1D4  3B 39 00 01 */	addi r25, r25, 1
/* 8020D278 0020A1D8  2C 19 00 7F */	cmpwi r25, 0x7f
/* 8020D27C 0020A1DC  3B 7B 00 40 */	addi r27, r27, 0x40
/* 8020D280 0020A1E0  41 80 FF 84 */	blt .L_8020D204
/* 8020D284 0020A1E4  2C 17 FF FF */	cmpwi r23, -1
/* 8020D288 0020A1E8  40 82 00 14 */	bne .L_8020D29C
/* 8020D28C 0020A1EC  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8020D290 0020A1F0  38 80 FF FC */	li r4, -4
/* 8020D294 0020A1F4  4B FF BC 8D */	bl __CARDPutControlBlock
/* 8020D298 0020A1F8  48 00 00 94 */	b .L_8020D32C
.L_8020D29C:
/* 8020D29C 0020A1FC  2C 18 FF FF */	cmpwi r24, -1
/* 8020D2A0 0020A200  41 82 00 14 */	beq .L_8020D2B4
/* 8020D2A4 0020A204  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8020D2A8 0020A208  38 80 FF F9 */	li r4, -7
/* 8020D2AC 0020A20C  4B FF BC 75 */	bl __CARDPutControlBlock
/* 8020D2B0 0020A210  48 00 00 7C */	b .L_8020D32C
.L_8020D2B4:
/* 8020D2B4 0020A214  56 E0 30 32 */	slwi r0, r23, 6
/* 8020D2B8 0020A218  7F 7A 02 14 */	add r27, r26, r0
/* 8020D2BC 0020A21C  38 7B 00 00 */	addi r3, r27, 0
/* 8020D2C0 0020A220  4B FF E8 29 */	bl __CARDAccess
/* 8020D2C4 0020A224  7C 64 1B 79 */	or. r4, r3, r3
/* 8020D2C8 0020A228  40 80 00 10 */	bge .L_8020D2D8
/* 8020D2CC 0020A22C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8020D2D0 0020A230  4B FF BC 51 */	bl __CARDPutControlBlock
/* 8020D2D4 0020A234  48 00 00 58 */	b .L_8020D32C
.L_8020D2D8:
/* 8020D2D8 0020A238  38 9E 00 00 */	addi r4, r30, 0
/* 8020D2DC 0020A23C  38 7B 00 08 */	addi r3, r27, 8
/* 8020D2E0 0020A240  38 A0 00 20 */	li r5, 0x20
/* 8020D2E4 0020A244  48 00 C0 31 */	bl strncpy
/* 8020D2E8 0020A248  3C 60 80 00 */	lis r3, 0x800000F8@ha
/* 8020D2EC 0020A24C  80 03 00 F8 */	lwz r0, 0x800000F8@l(r3)
/* 8020D2F0 0020A250  54 1D F0 BE */	srwi r29, r0, 2
/* 8020D2F4 0020A254  4B FF 00 AD */	bl OSGetTime
/* 8020D2F8 0020A258  38 DD 00 00 */	addi r6, r29, 0
/* 8020D2FC 0020A25C  38 A0 00 00 */	li r5, 0
/* 8020D300 0020A260  48 00 7C A9 */	bl __div2i
/* 8020D304 0020A264  90 9B 00 28 */	stw r4, 0x28(r27)
/* 8020D308 0020A268  38 7C 00 00 */	addi r3, r28, 0
/* 8020D30C 0020A26C  38 9F 00 00 */	addi r4, r31, 0
/* 8020D310 0020A270  4B FF C7 41 */	bl __CARDUpdateDir
/* 8020D314 0020A274  7C 7B 1B 79 */	or. r27, r3, r3
/* 8020D318 0020A278  40 80 00 10 */	bge .L_8020D328
/* 8020D31C 0020A27C  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8020D320 0020A280  7F 64 DB 78 */	mr r4, r27
/* 8020D324 0020A284  4B FF BB FD */	bl __CARDPutControlBlock
.L_8020D328:
/* 8020D328 0020A288  7F 63 DB 78 */	mr r3, r27
.L_8020D32C:
/* 8020D32C 0020A28C  BA E1 00 24 */	lmw r23, 0x24(r1)
/* 8020D330 0020A290  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 8020D334 0020A294  38 21 00 48 */	addi r1, r1, 0x48
/* 8020D338 0020A298  7C 08 03 A6 */	mtlr r0
/* 8020D33C 0020A29C  4E 80 00 20 */	blr 
.endfn CARDRenameAsync

.fn CARDRename, global
/* 8020D340 0020A2A0  7C 08 02 A6 */	mflr r0
/* 8020D344 0020A2A4  3C C0 80 20 */	lis r6, __CARDSyncCallback@ha
/* 8020D348 0020A2A8  90 01 00 04 */	stw r0, 4(r1)
/* 8020D34C 0020A2AC  38 C6 7E 64 */	addi r6, r6, __CARDSyncCallback@l
/* 8020D350 0020A2B0  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8020D354 0020A2B4  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8020D358 0020A2B8  3B E3 00 00 */	addi r31, r3, 0
/* 8020D35C 0020A2BC  4B FF FD F5 */	bl CARDRenameAsync
/* 8020D360 0020A2C0  2C 03 00 00 */	cmpwi r3, 0
/* 8020D364 0020A2C4  40 80 00 08 */	bge .L_8020D36C
/* 8020D368 0020A2C8  48 00 00 0C */	b .L_8020D374
.L_8020D36C:
/* 8020D36C 0020A2CC  7F E3 FB 78 */	mr r3, r31
/* 8020D370 0020A2D0  4B FF BD BD */	bl __CARDSync
.L_8020D374:
/* 8020D374 0020A2D4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8020D378 0020A2D8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8020D37C 0020A2DC  38 21 00 20 */	addi r1, r1, 0x20
/* 8020D380 0020A2E0  7C 08 03 A6 */	mtlr r0
/* 8020D384 0020A2E4  4E 80 00 20 */	blr 
.endfn CARDRename
